@use "../abstracts/" as *;

.testimonial {
  &__container {
    position: relative;
      @include clamp('padding-top', 22rem, 20vh, .1rem, 40rem);

 
    margin-top: -25rem;
    background-image: linear-gradient(
        to right bottom,
        $color-cream-opacity8,
        $color-lighter-brown-opacity8
      ),
      url(/images/high-angle-shot-magnificent-mountains-covered-with-trees-blue-sky.jpg);
    background-repeat: no-repeat;
    background-size: cover;
    padding-bottom: 3vw;

    .button {
      top: 7.5%;
      left: 50%;
      transform: translateX(-50%);
      z-index: 1;
      // width: 10vw;
      // max-width: 50rem;
      // height: 5vw;
      // max-height: 12rem;
      @include clamp('font-size', 1rem, 1.75vw, .1rem, 6rem);
      @include clamp('padding', .5rem, 1.5vw, .1rem, 5rem);
      height: auto;
    }
  }
  &__icon {
    position: relative;
    left: -2rem;
  }
  &__card {
    min-width: 60%;
    max-width: 85%;
    margin: 4vw auto;
    box-shadow: 0 3rem 6rem rgba(0, 0, 0, 0.1);
    background-color: rgba(255, 255, 255, 0.6);
    border-radius: 3px;
    padding: 6rem;
    padding-left: 9rem;
    @include paragraphFontSize(phone);
    // change this for mobile
    transform: skewX(-12deg);
  }

  &__shape {
      @include clamp('width', 7rem, 12vw, .1rem, 20rem);
      @include clamp('height', 7rem, 12vw, .1rem, 20rem);

    float: left;
    transform: translateX(-3rem) skewX(12deg);
    position: relative;
    overflow: hidden;
    border-radius: 50%;

    @supports (clip-path: polygon(0 0)) or (-webkit-clip-path: polygon(0 0)) {
      -webkit-clip-path: circle(50% at 50% 50%);
      clip-path: circle(50% at 50% 50%);
      -webkit-shape-outside: circle(50% at 50% 50%);
      shape-outside: circle(50% at 50% 50%);
      border-radius: none;
    }
  }

  &__img {
    // not sure why 200% works but it does for these pics in these dimensions
    height: 200%;
    transform: translateX(-4rem);
    backface-visibility: hidden;
    transition: all 0.5s;
  }

  &__text {
    transform: skewX(12deg);
    width: 70%;
    margin: auto;
    &--caption {
      text-transform: capitalize;
      font-weight: 800;
      // maybe use this for variable font size heights
      @include clamp('font-size', 1.25rem, 1.5vw, .1rem, 3.75rem);
      text-align: left;
    }
  }

  &__card:hover .testimonial__caption {
    opacity: 1;
    transform: translate(-50%, -50%);
  }
  &__card:hover .testimonial__img {
    transform: translateX(-4rem) scale(1);
    filter: blur(8px) brightness(80%);
  }
}

// come back to supports later
@supports (clip-path: polygon(0 0)) or (-webkit-clip-path: polygon(0 0)) {
  .story__shape {
    -webkit-clip-path: circle(50% at 50% 50%);
    clip-path: circle(50% at 50% 50%);
    -webkit-shape-outside: circle(50% at 50% 50%);
    shape-outside: circle(50% at 50% 50%);
    border-radius: none;
  }
}
/*<a href="https://www.freepik.com/free-photo/high-angle-shot-magnificent-mountains-covered-with-trees-blue-sky_9077120.htm#query=hill&position=5&from_view=search&track=sph&uuid=e8588934-7050-4902-9d88-6d92df718fe5">Image by wirestock</a> on Freepik*/

@media (max-width: 425px) {
  .testimonial {
    &__card {
      min-width: 75%;
      padding: 2rem;

      font-size: 0.6rem;
      margin: 3rem auto;
      // change this for mobile
      transform: skewX(0);
    }

    &__shape {
      // width: 50%;
      width: 4.5rem;
      height: 4.5rem;
      transform: translateX(-0) skewX(0);
      left: -0.5rem;
    }
    &__text {
      transform: skewX(0);

      &--caption {
        margin-left: 1rem;
      }
    }
    &__img {
      // not sure why 200% works but it does for these pics in these dimensions

      transform: translateX(-0.75rem);
    }
  }
}

@media (max-width: 600px) {
  .testimonial {
    &__card {
      width: 75%;
    }
    &__container {
      .button {
        font-size: 1.25rem;
        padding: 5px;
      }
    }
  }
}

@media (max-width: $md-device) {
  .testimonial {
    &__card {
      padding: 1rem;
      font-size: 1rem;
      margin: 3rem auto;
      // change this for mobile
      transform: skewX(-12deg);
    }

    &__shape {
      width: 7rem;
      height: 7rem;
      transform: translateX(-0) skewX(12deg);
      left: -0.5rem;
    }

    &__text {
      transform: skewX(12deg);
    }
    &__img {
      transform: translateX(-0.75rem);
    }
  }
}

@media (min-width: 2000px) {
  .testimonial {
    &__card {
      @include paragraphFontSize(tablet);
      width: 50%;
    }
  }
}

@media (min-width: 3000px) {
  .testimonial {
    &__text {
      width: 100%;
    }
  }
}
